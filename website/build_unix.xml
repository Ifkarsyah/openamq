<page
    name = "build_unix"
    title = "Building on Unix"
    subtitle = "Building on Unix Systems"
    >
<content type = "gurudoc">

Requirements for OpenAMQ on Unix
********************************

 - Linux 2.4 or later, Solaris 8 or 10, or another POSIX system
 - An ANSI C compiler (OpenAMQ builds with gcc, Sun C, and Intel C)
 - 1 gigabyte of available disk space
 - unzip or tar + gunzip

OpenAMQ has been validated on Linux 2.4 and 2.6, Solaris 8 and 10. It
may not build and/or not operate correctly on other POSIX systems. If
you need to build OpenAMQ on other POSIX systems please contact us for
rapid and free support.

Specify the IBASE Directory
***************************

The OpenAMQ libraries and executables are installed into the directory
defined by the environment variable IBASE (the shared install base for
all iMatix products).

Define IBASE using a command following this example:

    $ IBASE=$HOME/ibase
    $ export IBASE

You can add these commands to your shell startup script so that you do
not need to retype them in each shell window.

Set Your PATH
*************

To correctly access the OpenAMQ executables, you must place the IBASE/bin
directory on your path.  Do this using these commands:

    $ PATH=$IBASE/bin:$PATH
    $ export PATH

You can add these commands to your shell startup script so that you do not
need to retype them in each shell window.

Choose a Build Model
********************

From the same OpenAMQ source kit you can build many variations of the
software:

 - single-threaded, useful for single-core servers (st).
 - multi-threaded, ideal for servers with two or more cores (mt).
 - with full debugging information (debug).
 - optimised, without debugging information (release).

The default build is mt,release. To choose a different build, set the
BOOM_MODEL environment variable following this example:

   $ BOOM_MODEL="mt,debug"
   $ export BOOM_MODEL

You can add these commands to your shell startup script so that you do
not need to retype them in each shell window.

Unpack the Source Code
**********************

After downloading the OpenAMQ source kit, move it to a working directory
with sufficient disk space and then unpack the source code using this
command:

    $ tar zxvf /path/to/OpenAMQ-$(main_version).tar.gz
    $ cd /path/to/OpenAMQ-$(main_version)

Build the Packages
******************

After setting IBASE, your PATH, and BOOM_MODEL, build the software using
this command, in the OpenAMQ-$(main_version) directory:

    $ sh build.sh

Test the Server
***************

After a successful build, start the server as follows:

    $ amq_server
    OpenAMQ/$(main_version)
    Production release

    Copyright (c) 2004-2006 iMatix Corporation
    This is free software; see the source for copying conditions.  There is NO
    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

    2006-05-09 10:12:41: W: security warning - console login uses default password
    2006-05-09 10:12:42: I: server ready for incoming AMQ connections

And in a second window, start the test client as follows:

    $ amq_client

The client will create a temporary queue on the server, send a single
message to its own queue, and read the message back off its queue.  To
stop the server, press Ctrl-C.

More information: [page:deploy]
</content>
</page>
