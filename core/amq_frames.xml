<?xml?>
<!-- frame definitions for AMQP/Fast -->

<frames
    name   = "amq_frames"
    prefix = "amq"
    script = "amq_frames.gsl">

    <frame name = "connection challenge">
        <field type = "octet"    name = "type"         value = "10" />
        <field type = "octet"    name = "version"      >Negotiated protocol version</field>
        <field type = "shortstr" name = "mechanisms"   >Available security mechanisms</field>
        <field type = "table"    name = "challenges"   >Challenge fields</field>
        <sender role = "server" />
    </frame>

    <frame name = "connection response">
        <field type = "octet"    name = "type"         value = "11" />
        <field type = "shortstr" name = "mechanism"    >Selected security mechanism</field>
        <field type = "table"    name = "responses"    >Response fields</field>
        <sender role = "client" />
    </frame>

    <frame name = "connection tune">
        <field type = "octet"    name = "type"         value = "12" />
        <field type = "longint"  name = "frame max"    >Maximum accepted frame size</field>
        <field type = "shortint" name = "channel max"  >Maximum number of open channels</field>
        <field type = "shortint" name = "handle max"   >Maximum number of open handles</field>
        <field type = "shortint" name = "heartbeat"    >Requested heartbeat interval</field>
        <field type = "table"    name = "options"      >Tuning options</field>
        <sender role = "client" />
        <sender role = "server" />
    </frame>

    <frame name = "connection open">
        <field type = "octet"    name = "type"         value = "13" />
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "shortstr" name = "virtual path" >Virtual server path</field>
        <field type = "shortstr" name = "client name"  >Client identifier</field>
        <field type = "table"    name = "options"      >Connection options</field>
        <sender role = "client" />
    </frame>

    <frame name = "connection ping">
        <field type = "octet"    name = "type"         value = "14" />
        <field type = "bit"      name = "respond"      >Please respond</field>
        <sender role = "client" />
        <sender role = "server" />
    </frame>

    <frame name = "connection reply">
        <field type = "octet"    name = "type"         value = "18" />
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "shortint" name = "reply code"   >Reply code</field>
        <field type = "shortstr" name = "reply text"   >Reply text</field>
        <sender role = "server" />
    </frame>

    <frame name = "connection close">
        <field type = "octet"    name = "type"         value = "19" />
        <field type = "shortint" name = "reply code"   >Reply code</field>
        <field type = "shortstr" name = "reply text"   >Reply text</field>
        <sender role = "client" />
        <sender role = "server" />
    </frame>

    <frame name = "channel open">
        <field type = "octet"    name = "type"         value = "20" />
        <field type = "shortint" name = "channel id"   >Channel number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "bit"      name = "transacted"   >Transaction mode</field>
        <field type = "bit"      name = "restartable"  >Restartable mode</field>
        <field type = "table"    name = "options"      >Channel options</field>
        <field type = "shortstr" name = "out of band"  >Out of band options</field>
        <sender role = "client" />
    </frame>

    <frame name = "channel ack">
        <field type = "octet"    name = "type"         value = "21" />
        <field type = "shortint" name = "channel id"   >Channel number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "longint"  name = "message nbr"  >Message reference</field>
        <sender role = "client" />
    </frame>

    <frame name = "channel commit">
        <field type = "octet"    name = "type"         value = "22" />
        <field type = "shortint" name = "channel id"   >Channel number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "table"    name = "options"      >Transaction options</field>
        <sender role = "client" />
    </frame>

    <frame name = "channel rollback">
        <field type = "octet"    name = "type"         value = "23" />
        <field type = "shortint" name = "channel id"   >Channel number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "table"    name = "options"      >Transaction options</field>
        <sender role = "client" />
    </frame>

    <frame name = "channel reply">
        <field type = "octet"    name = "type"         value = "28" />
        <field type = "shortint" name = "channel id"   >Channel number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "shortint" name = "reply code"   >Reply code</field>
        <field type = "shortstr" name = "reply text"   >Reply text</field>
        <sender role = "server" />
    </frame>

    <frame name = "channel close">
        <field type = "octet"    name = "type"         value = "29" />
        <field type = "shortint" name = "channel id"   >Channel number</field>
        <field type = "shortint" name = "reply code"   >Reply code</field>
        <field type = "shortstr" name = "reply text"   >Reply text</field>
        <sender role = "client" />
        <sender role = "server" />
    </frame>

    <frame name = "handle open">
        <field type = "octet"    name = "type"         value = "30" />
        <field type = "shortint" name = "channel id"   >Channel number</field>
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "service type" >Service type</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "bit"      name = "producer"     >Request producer access</field>
        <field type = "bit"      name = "consumer"     >Request consumer access</field>
        <field type = "bit"      name = "browser"      >Request browser access</field>
        <field type = "bit"      name = "temporary"    >Request a temporary dest</field>
        <field type = "shortstr" name = "dest name"    >Default destination name</field>
        <field type = "shortstr" name = "mime type"    >Default MIME type</field>
        <field type = "shortstr" name = "encoding"     >Default content encoding</field>
        <field type = "table"    name = "options"      >Destination options</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle send">
        <field type = "octet"    name = "type"         value = "31" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "longint"  name = "fragment size">Size of following fragment</field>
        <field type = "bit"      name = "partial"      >Partial message?</field>
        <field type = "bit"      name = "out of band"  >Out of band data?</field>
        <field type = "bit"      name = "recovery"     >Restarting large message?</field>
        <field type = "bit"      name = "streaming"    >Working in streaming mode?</field>
        <field type = "shortstr" name = "dest name"    >Destination name suffix</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle consume">
        <field type = "octet"    name = "type"         value = "32" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "shortint" name = "prefetch"     >Max pending messages</field>
        <field type = "bit"      name = "no local"     >Don't deliver to self?</field>
        <field type = "bit"      name = "unreliable"   >Unreliable mode</field>
        <field type = "shortstr" name = "dest name"    >Destination name</field>
        <field type = "shortstr" name = "identifier"   >Subscription identifier</field>
        <field type = "longstr"  name = "selector"     >Destination selector</field>
        <field type = "shortstr" name = "mime type"    >Selector MIME type</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle cancel">
        <field type = "octet"    name = "type"         value = "33" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "shortstr" name = "dest name"    >Destination name suffix</field>
        <field type = "shortstr" name = "identifier"   >Subscription identifier</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle flow">
        <field type = "octet"    name = "type"         value = "34" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "bit"      name = "flow pause"   >Pause the flow of messages?</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle unget">
        <field type = "octet"    name = "type"         value = "35" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "longint"  name = "message nbr"  >Message reference</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle query">
        <field type = "octet"    name = "type"         value = "36" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "longint"  name = "message nbr"  >Message base</field>
        <field type = "shortstr" name = "dest name"    >Destination name suffix</field>
        <field type = "longstr"  name = "selector"     >Destination selector</field>
        <field type = "shortstr" name = "mime type"    >Selector MIME type</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle browse">
        <field type = "octet"    name = "type"         value = "37" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "longint"  name = "message nbr"  >Message reference</field>
        <sender role = "client" />
    </frame>

    <frame name = "handle created">
        <field type = "octet"    name = "type"         value = "40" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortstr" name = "dest name"    >Created destination name</field>
        <sender role = "server" />
    </frame>

    <frame name = "handle notify">
        <field type = "octet"    name = "type"         value = "41" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "longint"  name = "message nbr"  >Message reference</field>
        <field type = "longint"  name = "fragment size">Size of response fragment</field>
        <field type = "bit"      name = "partial"      >Partial message?</field>
        <field type = "bit"      name = "out of band"  >Out of band data?</field>
        <field type = "bit"      name = "recovery"     >Restarting large message?</field>
        <field type = "bit"      name = "delivered"    >Message must be acknowledged?</field>
        <field type = "bit"      name = "redelivered"  >Message is being redelivered?</field>
        <field type = "bit"      name = "streaming"    >Working in streaming mode?</field>
        <field type = "shortstr" name = "dest name"    >Originating destination</field>
        <sender role = "server" />
    </frame>

    <frame name = "handle index">
        <field type = "octet"    name = "type"         value = "42" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "longint"  name = "message nbr"  >Message base</field>
        <field type = "longstr"  name = "message list" >List of message references</field>
        <sender role = "server" />
    </frame>

    <frame name = "handle prepare">
        <field type = "octet"    name = "type"         value = "43" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "longint"  name = "fragment size">Size of message header</field>
        <field type = "shortstr" name = "content hash" >SHA1 signature for content</field>
        <sender role = "client" />
        <sender role = "server" />
    </frame>

    <frame name = "handle ready">
        <field type = "octet"    name = "type"         value = "44" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "longint"  name = "message size" >Size of existing data, or zero</field>
        <sender role = "client" />
        <sender role = "server" />
    </frame>

    <frame name = "handle reply">
        <field type = "octet"    name = "type"         value = "48" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "confirm tag"  >Confirmation tag</field>
        <field type = "shortint" name = "reply code"   >Reply code</field>
        <field type = "shortstr" name = "reply text"   >Reply text</field>
        <sender role = "server" />
    </frame>

    <frame name = "handle close">
        <field type = "octet"    name = "type"         value = "49" />
        <field type = "shortint" name = "handle id"    >Handle number</field>
        <field type = "shortint" name = "reply code"   >Reply code</field>
        <field type = "shortstr" name = "reply text"   >Reply text</field>
        <sender role = "client" />
        <sender role = "server" />
    </frame>

    <!-- We encode the message header as a frame too -->
    <frame name = "message head">
        <field type = "longint"  name = "body size"    >Message body size</field>
        <field type = "bit"      name = "persistent"   >Persistent data?</field>
        <field type = "octet"    name = "priority"     >Priority 0 (low) to 9 (high)</field>
        <field type = "longint"  name = "expiration"   >Expiration time in UTC seconds</field>
        <field type = "shortstr" name = "mime type"    >Content MIME type</field>
        <field type = "shortstr" name = "encoding"     >Content encoding</field>
        <field type = "shortstr" name = "identifier"   >Message identifier</field>
        <field type = "table"    name = "headers"      >Message headers</field>
    </frame>
</frames>
