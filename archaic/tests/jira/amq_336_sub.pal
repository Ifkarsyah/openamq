<?xml?>
<pal
    script = "amq_pal_gen"
    desc   = ""
    >
    <include filename = "amq_test_base.pal" />
    <session>
        <exchange_declare exchange = "dexchange" type = "direct" />
        <queue_declare queue = "source" />
        <queue_declare queue = "dest" />
        <queue_declare queue = "test" />
        <queue_bind queue = "source" exchange = "dexchange" />
        <queue_bind queue = "dest" exchange = "dexchange" />
        <basic_consume queue = "dest" />
        <repeat>
            <wait />
            <basic_arrived>
                <echo>Message '$message_id' arrived, setting channel_flow to false</echo>
                <channel_flow active = "0" />
                <echo>Trying to bind a queue</echo>
                <queue_bind queue = "test" exchange = "dexchange" />
            </basic_arrived>
        </repeat>
    </session>
    
</pal>


