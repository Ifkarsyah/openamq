OpenAMQ change log

AMQP changes for 0.92
    - exchange.declare-ok - add properties result
    - queue.declare-ok - add properties result
    - basic.consume - make assertive, accept existing consumer tags
    - basic.cancel - explicitly document as assertive
    - exchange.delete - explicitly document as assertive
    - queue.delete - explicitly document as assertive
    - queue.unbind - explicitly document as assertive, queue may be gone
    - basic.ack - make synchronous, reply is ack-ok
    - basic.reject - make synchronous, reply is reject-ok
    - rest class
    - direct class

TODO
    - implement persistent queues
        - only for get/ack
        - mainly for RESTful access
        - back the queue using SQLite
        - add SQLite to foreign
    - put debian packaging into release package
    - remove unused IPR classes
    - remove C++ generation from boom
    - remove C++ templates
    - reorganize openamq archive to be clean
    - merge amq_queue_basic & amq_queue_base into amq_queue
    - fix/remove settle time in server (before/after socket? federation?)
    - solve DoS - create too many queues, exchanges, bindings
        - quotas per connection
        - connections per IP address
    - solve security on exchanges, bindings, queues
        - set permissions on declare
            - world, group, owner
            - exchange publish, bind, delete
            - queue consume, delete
            - defaults can be defined in configuration
            - perhaps using group name in item name
        - need concept of arbitrary user groups
        - document as new security model proposal
    - add latency measurement to messages
       - random sampling 1 in 1,000
       - also measure time for smt write
       - show frequency spread over N slots
       - option to log to a file...
    - allow primary in failover to come up alone
    - make federation work with failover
    - consider how to make federation work asynchronously (queue to queue?)
    - consider how to implement reliable req-resp and pub-sub
        - using persistent exchange to back the data
    - rename base to base1 and reversion base2

idea: OpenAMQ running somewhere, accepts RESTful accesses via Internet.  Web page shows up time and statistics of usage.  Prize for being able to crash the server... (Send us script, get your name on the web page)


2008-10-31

* fixed: log file naming did not work when name with no extension was specified (1.2, 1.3, 1.4)

2008-10-27

* fixed: Basic.Cancel returned error if consumer did not exist, should return Cancel-Ok. (1.2, 1.3, 1.4)
* fixed: http://www.openamq.org/issue:32 fix caused WireAPI wait() to wait unduly (1.2, 1.3, 1.4)

2008-10-20

* fixed: mixing deliveries with sync methods confused WireAPI (http://www.openamq.org/issue:32)
* fixed: Queue.Destroy was not working properly (http://www.openamq.org/issue:31)
* fixed: zero-sized content crashes server & client (http://www.openamq.org/issue:30)
* fixed: asl_field_list_dump () wrote into unallocated memory. (http://www.openamq.org/issue:29)
* fixed: PAL did not allow nested repeat blocks (confused the counters).

2008-10-19

* fixed: amq_client.asl crashed when using default exchange (http://www.openamq.org/issue:28)
* fixed: amq_server let applications delete pre-defined exchanges (http://www.openamq.org/issue:27)

2008-10-17

* Java JMS client moved to public git at http://github.com/pieterh/openamq-jms/tree/master
* fixed: PAL assert did not work with symbolic variables
* added amq_rest.asl class for RESTful access to server resources

2008-10-15

* --debug_route prints exchange creation and destruction (like queues)
* removed rwlock from wireapi connection & session (need to profile difference)
* added portals and made http server work with current base2

2008-10-12

* 'c' script: suppress warning when creating new library on Linux/UNIX
* when server takes action on queue overflow, displays client IP address in logs
* fixed: in direct mode, queue & connection transfer statistics were not updated (DAMQ-9)

2008-10-09

* reduced server queue limits for greater stability (10000/40000, 1000/5000)
* implemented warn/drop on Direct Mode for slow network links, using private queue config (http://www.openamq.org/issue:22)
* fixed crash in content wire_get with malformed content (http://www.openamq.org/issue:24)

2008-10-08

* added WIREAPI_FAKESLOW environment variable to simulate slow network at client end (http://www.openamq.org/issue:22)
    
2008-10-07

* fixed loss of messages caused by Direct Mode heartbeating (http://www.openamq.org/issue:20)

2008-10-06

* fixed amq_client to report lost messages, if any, on interrupt
* added report of total direct in/out/sunk/fed in --dump_state
* amq_shell did not work with direct mode (http://www.openamq.org/issue:19)

2008-10-02

* allow signal to be registered by multiple threads (issue:16)
* fixed error in WIREAPI_SILENT handling (issue:18)

2009-09-28

* connection->silent set by default from WIREAPI_SILENT environment variable
* session->silent removed, uses connection setting
* Refactored CBFC out of base2/asl and into openamq/server, except for minimal stub.
* Added tuning:private_window and public_window settings

2009-09-27

* Fixed AMQ-590 bug in CBFC and backported to 1.2d.

2009-09-23

* Added high/low water handling for Direct Mode (warn, trim, drop, kill)
* Refactored handling of high/low water into asl_client_session template
* Defined configuration for Direct Mode high water handling (on_overflow)
    -> needs to be documented

2009-09-22

* Frame-max limit was wrongly defined as 4M, should be 2M (IPR_BUCKET_MAX)
* Added configurability to direct mode batching (direct/batching)
    -> needs to be documented

2009-09-21

* Consumer-tag got corrupted in direct-mode transfers (issue:2 refix)
* Direct mode caused aborts on client session close (issue:14)

2008-09-17

* Implemented Direct Mode bundling in client and server agents.

2008-09-16

* Implemented Basic.Qos (trunk and 1.2d) (issue:5)
* Direct mode properly records input/output rates (trunk) (issue:11)
* Fixed use of C++ words in amq_queue.icl (private) and amq_cml (class) (trunk & 1.2d) (issue:6)
* Fixed setting of last routing key on binding (trunk & 1.2d1) (issue:12)
* amq_queue reported bad client ip address on shared queues with no connections (trunk & 1.2d) (issue:12)
* Fixed error in topic routing key (foo.# matched fruit.bar) (issue:7)

2008-09-10

* DAMQ-6: fixed protocol class error (asl_connection.asl)

2008-09-06

* JAMQ-120: fixed rare crash on read from closing socket

2008-09-04 

* Renamed arrived_high_water/low_water to high_water/low_water in wireapi.cfg
* Added direct option to wireapi.cfg
* Added direct option to server config (--direct 1, or in config file)
* In PAL, <session failover = "n"> option changed to seconds for consistency
* In PAL, added <session direct = "1"> option to enable Direct Mode
* Session now accurately holds content exchange, routing-key, and consumer-tag.  (http://www.openamq.org/issue:2)

2008-08-26

* Removed active/passive arrays from amq_client.c
* Added support for Direct Message Protocol <4-DMP@wiki.amqp.org>

2008-08-22

* Removed file, stream, tx, dtx, and tunnel classes from OpenAMQ
* Fanout exchange did not accept multiple bindings - fixed
* Fixed various compiler warnings for gcc 4.2.3

2008-08-21

Changes to failover functionality

* Fixed split-brain error in failover (HA pair would randomly split)
* Renamed /failover/failover_timeout config item to /failover/timeout
* Removed failover monitor config item, is now always timeout / 2
* Failover timeout defaults to 5 seconds (was 1 second)
* Failover timeout verified to not exceed 60 seconds
* Issues warning if timeout is 0 or > 60 (then fixes timeout)

2008-07-28

* Fixed crash at server startup if could not resolve own hostname (win32) (http://www.openamq.org/issue:3)

